/* ================= COCHE MEJORADO ================= */
const car = new THREE.Group();

// chasis inferior
const chassis = new THREE.Mesh(
  new THREE.BoxGeometry(4, 0.6, 6),
  new THREE.MeshStandardMaterial({ 
    color: 0xff3b3b,
    metalness: 0.6,
    roughness: 0.3
  })
);
chassis.position.y = 0.3;
chassis.castShadow = true;
car.add(chassis);

// cabina
const cabin = new THREE.Mesh(
  new THREE.BoxGeometry(3, 1.2, 3),
  new THREE.MeshStandardMaterial({ 
    color: 0x222222,
    metalness: 0.8,
    roughness: 0.2
  })
);
cabin.position.set(0, 1.2, -0.5);
cabin.castShadow = true;
car.add(cabin);

// capó
const hood = new THREE.Mesh(
  new THREE.BoxGeometry(3.5, 0.4, 2),
  new THREE.MeshStandardMaterial({ 
    color: 0xff3b3b,
    metalness: 0.6,
    roughness: 0.3
  })
);
hood.position.set(0, 0.8, 2);
hood.castShadow = true;
car.add(hood);

// alerón trasero
const spoiler = new THREE.Mesh(
  new THREE.BoxGeometry(3.5, 0.3, 0.5),
  new THREE.MeshStandardMaterial({ 
    color: 0x1a1a1a,
    metalness: 0.7,
    roughness: 0.2
  })
);
spoiler.position.set(0, 1.5, -3.2);
spoiler.castShadow = true;
car.add(spoiler);

// ruedas
const wheelGeometry = new THREE.CylinderGeometry(0.8, 0.8, 0.6, 16);
const wheelMaterial = new THREE.MeshStandardMaterial({ 
  color: 0x1a1a1a,
  metalness: 0.5,
  roughness: 0.5
});

function addWheel(x, z) {
  const wheel = new THREE.Mesh(wheelGeometry, wheelMaterial);
  wheel.rotation.z = Math.PI / 2;
  wheel.position.set(x, 0, z);
  wheel.castShadow = true;
  car.add(wheel);
}

addWheel(-2, 2);
addWheel(2, 2);
addWheel(-2, -2);
addWheel(2, -2);

car.position.y = 0.8;
scene.add(car);

let speed = 0;
let angle = 0;
