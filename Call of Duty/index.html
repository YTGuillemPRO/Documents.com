<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>CoD Web Experience - Engine</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #1a1a1a;
            font-family: 'Courier New', Courier, monospace;
            cursor: crosshair;
            user-select: none;
        }

        /* Contenedor del Juego */
        #game-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.2s ease-out; /* Efecto zoom al apuntar */
        }

        /* Mira (Crosshair) */
        #crosshair {
            position: absolute;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(0, 255, 0, 0.7);
            border-radius: 50%;
            pointer-events: none;
            z-index: 10;
        }

        /* Enemigo de prueba */
        .enemy {
            position: absolute;
            width: 60px;
            height: 100px;
            background: #8b0000;
            border: 2px solid #ff0000;
            box-shadow: 0 0 15px rgba(255,0,0,0.5);
            transition: opacity 0.2s;
        }

        /* HUD: Munición y Estado */
        #hud {
            position: absolute;
            bottom: 30px;
            right: 50px;
            color: white;
            text-align: right;
            text-shadow: 2px 2px 4px black;
        }

        #ammo-count { font-size: 48px; font-weight: bold; }
        #status { font-size: 18px; color: #ffcc00; }

        /* Efecto de Apuntado (ADS) */
        .ads-mode {
            transform: scale(1.5); /* Simula zoom de mira */
        }
    </style>
</head>
<body>

<div id="game-container">
    </div>

<div id="crosshair"></div>

<div id="hud">
    <div id="status">READY</div>
    <div id="ammo-count">30 / 30</div>
    <div style="font-size: 12px;">[L-CLICK] FIRE | [R-CLICK] AIM | [R] RELOAD</div>
</div>

<script>
    const container = document.getElementById('game-container');
    const ammoLabel = document.getElementById('ammo-count');
    const statusLabel = document.getElementById('status');
    
    let state = {
        ammo: 30,
        maxAmmo: 30,
        isReloading: false,
        isAiming: false,
        isFiring: false,
        fireRate: 100, // milisegundos entre balas
    };

    // --- LÓGICA DE ENEMIGOS ---
    function spawnEnemy() {
        const enemy = document.createElement('div');
        enemy.className = 'enemy';
        enemy.style.left = Math.random() * (window.innerWidth - 100) + 'px';
        enemy.style.top = Math.random() * (window.innerHeight - 200) + 'px';
        
        enemy.onclick = (e) => {
            if (state.ammo > 0 && !state.isReloading) {
                enemy.style.opacity = '0';
                setTimeout(() => { enemy.remove(); spawnEnemy(); }, 200);
            }
        };
        container.appendChild(enemy);
    }

    // Inicializar enemigos
    for(let i=0; i<3; i++) spawnEnemy();

    // --- SISTEMA DE DISPARO REALISTA ---
    function fire() {
        if (state.ammo <= 0) {
            reload();
            return;
        }
        if (state.isReloading) return;

        state.ammo--;
        updateHUD();
        
        // Efecto visual de retroceso (recoil) leve
        container.style.marginTop = "-5px";
        setTimeout(() => container.style.marginTop = "0px", 50);

        if (state.isFiring) {
            setTimeout(fire, state.fireRate);
        }
    }

    function reload() {
        if (state.isReloading || state.ammo === state.maxAmmo) return;
        state.isReloading = true;
        statusLabel.innerText = "RELOADING...";
        
        setTimeout(() => {
            state.ammo = state.maxAmmo;
            state.isReloading = false;
            statusLabel.innerText = "READY";
            updateHUD();
        }, 1500); // 1.5s de recarga
    }

    function updateHUD() {
        ammoLabel.innerText = `${state.ammo} / ${state.maxAmmo}`;
    }

    // --- CONTROLES (MOUSE Y TECLADO) ---
    window.addEventListener('mousedown', (e) => {
        if (e.button === 0) { // Clic izquierdo: Disparar
            state.isFiring = true;
            fire();
        }
        if (e.button === 2) { // Clic derecho: Apuntar (ADS)
            state.isAiming = true;
            container.classList.add('ads-mode');
        }
    });

    window.addEventListener('mouseup', (e) => {
        if (e.button === 0) state.isFiring = false;
        if (e.button === 2) {
            state.isAiming = false;
            container.classList.remove('ads-mode');
        }
    });

    window.addEventListener('keydown', (e) => {
        if (e.key.toLowerCase() === 'r') reload();
    });

    // Desactivar menú contextual para usar clic derecho para apuntar
    window.oncontextmenu = (e) => e.preventDefault();
</script>

</body>
</html>
