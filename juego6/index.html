<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Clash Royale Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    margin:0;
    font-family:Arial Black, sans-serif;
    background:#0a0e27;
    color:white;
}
.screen{display:none;width:100vw;height:100vh;}
.screen.active{display:flex;}
button{cursor:pointer}

/* MENU */
#menu-screen{
    flex-direction:column;
    align-items:center;
    justify-content:center;
    background:linear-gradient(135deg,#667eea,#764ba2);
}
.game-logo{font-size:60px;margin-bottom:30px;}
.menu-buttons button{
    padding:20px 40px;
    font-size:30px;
    border-radius:20px;
    border:none;
    background:linear-gradient(135deg,#f5576c,#f093fb);
    color:white;
}

/* BATALLA */
#battle-screen{background:#1a1f3a;position:relative}
.battle-arena{
    width:600px;
    height:800px;
    margin:auto;
    position:relative;
    border-radius:20px;
    overflow:hidden;
    background:#5fbf60;
}

/* RIO */
.river{
    position:absolute;
    top:350px;
    width:100%;
    height:100px;
    background:#3498db;
}

/* PUENTES */
.bridge{
    position:absolute;
    width:80px;
    height:100px;
    background:#8e5a2b;
    top:350px;
}
.bridge.left{left:100px;}
.bridge.right{right:100px;}

/* TORRES */
.tower{
    position:absolute;
    width:80px;
    height:80px;
    background:#555;
    border-radius:10px;
    text-align:center;
    font-size:40px;
    line-height:80px;
}
.enemy{top:30px;left:260px;}
.player{bottom:30px;left:260px;}

/* UNIDADES */
.battle-unit{
    position:absolute;
    font-size:36px;
}

/* HUD */
.battle-hud{
    position:absolute;
    top:10px;
    left:50%;
    transform:translateX(-50%);
    background:black;
    padding:10px 30px;
    border-radius:15px;
    display:flex;
    gap:30px;
    font-size:22px;
}

/* MAZO */
.battle-deck{
    position:absolute;
    bottom:0;
    width:100%;
    background:rgba(0,0,0,0.85);
    padding:10px;
    text-align:center;
}
.card{
    display:inline-block;
    background:#3498db;
    padding:10px;
    margin:5px;
    width:80px;
    border-radius:10px;
    cursor:pointer;
}
.card.disabled{opacity:0.4;cursor:not-allowed}

/* RESULTADO */
#result{
    position:absolute;
    inset:0;
    background:rgba(0,0,0,0.9);
    display:none;
    align-items:center;
    justify-content:center;
    flex-direction:column;
}
</style>
</head>

<body>

<div id="menu-screen" class="screen active">
    <div class="game-logo">‚öîÔ∏è CLASH ROYALE ‚öîÔ∏è</div>
    <button id="battleBtn">¬°BATALLA!</button>
</div>

<div id="battle-screen" class="screen">
    <div class="battle-hud">
        ‚è± <span id="timer">3:00</span>
        üíú <span id="elixirText">5</span>/10
    </div>

    <div class="battle-arena" id="arena">
        <div class="tower enemy">üè∞</div>
        <div class="river"></div>
        <div class="bridge left"></div>
        <div class="bridge right"></div>
        <div class="tower player">üè∞</div>
    </div>

    <div class="battle-deck">
        <div id="cards"></div>
    </div>

    <div id="result">
        <h1>üèÜ FIN DE BATALLA</h1>
        <button onclick="goMenu()">Volver</button>
    </div>
</div>

<script>
let elixir=5,time=180,selected=null;
const arena=document.getElementById("arena");

const cards=[
 {icon:"üõ°Ô∏è",cost:3},
 {icon:"üèπ",cost:3},
 {icon:"üëπ",cost:2},
 {icon:"üßü",cost:5}
];

document.getElementById("battleBtn").onclick=startBattle;

function startBattle(){
    document.getElementById("menu-screen").classList.remove("active");
    document.getElementById("battle-screen").classList.add("active");
    renderCards();
    setInterval(()=>{if(elixir<10){elixir++;updateElixir();renderCards()}},3000);
    setInterval(timerTick,1000);
}

function renderCards(){
    const c=document.getElementById("cards");
    c.innerHTML="";
    cards.forEach((card,i)=>{
        const d=document.createElement("div");
        d.className="card"+(elixir<card.cost?" disabled":"");
        d.innerHTML=card.icon+"<br>"+card.cost;
        d.onclick=()=>{if(elixir>=card.cost)selected=i};
        c.appendChild(d);
    });
}

arena.onclick=e=>{
    if(selected===null)return;
    const r=arena.getBoundingClientRect();
    const x=e.clientX-r.left;
    const y=e.clientY-r.top;

    if(y<450) return; // NO en r√≠o ni enemigo

    spawn(x,y,cards[selected].icon);
    elixir-=cards[selected].cost;
    selected=null;
    updateElixir();
    renderCards();
};

function spawn(x,y,icon){
    const u=document.createElement("div");
    u.className="battle-unit";
    u.textContent=icon;
    u.style.left=x+"px";
    u.style.top=y+"px";
    arena.appendChild(u);

    const move=setInterval(()=>{
        y-=1;
        u.style.top=y+"px";
        if(y<80){
            clearInterval(move);
            u.remove();
        }
    },20);
}

function updateElixir(){
    document.getElementById("elixirText").textContent=elixir;
}

function timerTick(){
    time--;
    const m=Math.floor(time/60);
    const s=(time%60).toString().padStart(2,"0");
    document.getElementById("timer").textContent=`${m}:${s}`;
    if(time<=0){
        document.getElementById("result").style.display="flex";
    }
}

function goMenu(){
    location.reload();
}
</script>

</body>
</html>
