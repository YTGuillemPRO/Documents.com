<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Pet Simulator Ultra - Big Screen Edition</title>
<style>
  
(function() {
  'use strict';
  
  // ESPERAR A QUE TODO EL HTML EST√â CARGADO
  window.addEventListener('DOMContentLoaded', function() {
    initGame();
  });

  function initGame() {
    // CONFIGURACI√ìN DE DATOS - TUS PETS
    window.petsConfig = {
      normal: [
        {icon:'üê≠', name:'Rat√≥n de Campo', rarity:'common', earnings:5},
        {icon:'üê∂', name:'Perro Fiel', rarity:'common', earnings:12},
        {icon:'üê±', name:'Gato Curioso', rarity:'common', earnings:15},
        {icon:'üê∞', name:'Conejo', rarity:'common', earnings:20},
        {icon:'üê•', name:'Pollito', rarity:'common', earnings:25},
        {icon:'ü¶ä', name:'Zorro', rarity:'rare', earnings:80},
        {icon:'üêª', name:'Oso', rarity:'rare', earnings:110},
        {icon:'üêº', name:'Panda', rarity:'rare', earnings:150},
        {icon:'üê®', name:'Koala', rarity:'rare', earnings:200},
        {icon:'üêØ', name:'Tigre', rarity:'epic', earnings:450},
        {icon:'ü¶Å', name:'Le√≥n', rarity:'epic', earnings:600},
        {icon:'üê∫', name:'Lobo', rarity:'epic', earnings:800}
      ],
      special: [
        {icon:'ü¶Å', name:'Le√≥n Majestuoso', rarity:'rare', earnings:200},
        {icon:'ü¶Ñ', name:'Unicornio M√≠stico', rarity:'god', earnings:650},
        {icon:'üê≤', name:'Drag√≥n Ancestral', rarity:'god', earnings:1500},
        {icon:'ü¶ñ', name:'T-Rex OG', rarity:'og', earnings:6000},
        {icon:'ü¶Ñ', name:'Unicornio', rarity:'legendary', earnings:2500},
        {icon:'üê≤', name:'Drag√≥n', rarity:'legendary', earnings:3500},
        {icon:'üî±', name:'Poseid√≥n', rarity:'mythic', earnings:8000},
        {icon:'üî•', name:'F√©nix', rarity:'mythic', earnings:12000},
        {icon:'‚ö°', name:'Zeus', rarity:'mythic', earnings:18000},
        {icon:'üëæ', name:'Glitch', rarity:'secret', earnings:50000},
        {icon:'üåå', name:'Galaxia', rarity:'secret', earnings:100000},
        {icon:'üíé', name:'Diamante', rarity:'secret', earnings:250000},
        {icon:'üëÅÔ∏è', name:'Illuminati', rarity:'secret', earnings:500000},
        {icon:'üëë', name:'EL REY OG', rarity:'og', earnings:2000000}
      ]
    };

    window.rebirthCosts = [1000000, 15000000, 100000000, 750000000, 3000000000];
    
    // ESTADO DEL JUEGO
    window.state = {
      money: 10,
      rb: 0,
      mult: 1,
      pets: [],
      discovered: [],
      priceN: 10,
      priceS: 500
    };

    window.isSpecial = false;

    // CARGAR Y CONFIGURAR
    loadGame();
    setupEventListeners();
    updateUI();
    startIncomeLoop();
  }

  function loadGame() {
    try {
      const data = localStorage.getItem('PetSimPro_GlobalSave');
      if (data) {
        window.state = JSON.parse(data);
      }
    } catch(e) {
      console.log('No se pudo cargar el guardado');
    }
  }

  function saveGame() {
    localStorage.setItem('PetSimPro_GlobalSave', JSON.stringify(window.state));
  }

  function updateUI() {
    try {
      const moneyEl = document.getElementById('money');
      if (moneyEl) moneyEl.innerText = Math.floor(window.state.money).toLocaleString();
      
      const rbLevelEl = document.getElementById('rbLevel');
      if (rbLevelEl) rbLevelEl.innerText = window.state.rb;
      
      const rbMultEl = document.getElementById('rbMult');
      if (rbMultEl) rbMultEl.innerText = window.state.mult.toFixed(2);
      
      const priceNEl = document.getElementById('priceN');
      if (priceNEl) priceNEl.innerText = window.state.priceN.toLocaleString();
      
      const priceSEl = document.getElementById('priceS');
      if (priceSEl) priceSEl.innerText = window.state.priceS.toLocaleString();
      
      updateRebirthButton();
      renderPets();
    } catch(e) {}
  }

  function setupEventListeners() {
    const elements = {
      closeHatchBtn: document.getElementById('closeHatchBtn'),
      buyEggBtn: document.getElementById('buyEggBtn'),
      rebirthBtn: document.getElementById('rebirthBtn'),
      normalBtn: document.getElementById('normalBtn'),
      specialBtn: document.getElementById('specialBtn'),
      tabPetsBtn: document.getElementById('tabPetsBtn'),
      tabIndexBtn: document.getElementById('tabIndexBtn')
    };

    if (elements.closeHatchBtn) elements.closeHatchBtn.onclick = closeHatch;
    if (elements.buyEggBtn) elements.buyEggBtn.onclick = openEgg;
    if (elements.rebirthBtn) elements.rebirthBtn.onclick = doRebirth;
    if (elements.normalBtn) elements.normalBtn.onclick = () => setEgg(false);
    if (elements.specialBtn) elements.specialBtn.onclick = () => setEgg(true);
    if (elements.tabPetsBtn) elements.tabPetsBtn.onclick = () => switchTab('pets');
    if (elements.tabIndexBtn) elements.tabIndexBtn.onclick = () => switchTab('index');
  }

  function setEgg(special) {
    window.isSpecial = special;
    const normalBtn = document.getElementById('normalBtn');
    const specialBtn = document.getElementById('specialBtn');
    if (normalBtn) normalBtn.classList.toggle('active', !special);
    if (specialBtn) specialBtn.classList.toggle('active', special);
  }

  window.openEgg = function() {
    let cost = window.isSpecial ? window.state.priceS : window.state.priceN;
    if (window.state.money < cost) {
      alert('¬°No tienes suficiente dinero!');
      return;
    }
    
    window.state.money -= cost;
    if (window.isSpecial) window.state.priceS = Math.floor(window.state.priceS * 1.35);
    else window.state.priceN = Math.floor(window.state.priceN * 1.28);

    const pool = window.isSpecial ? window.petsConfig.special : window.petsConfig.normal;
    const pet = pool[Math.floor(Math.random() * pool.length)];
    window.state.pets.push({...pet, id: Date.now()});
    
    if (!window.state.discovered.includes(pet.name)) {
      window.state.discovered.push(pet.name);
    }

    playHatchAnimation(pet);
    saveGame();
    updateUI();
  };

  window.playHatchAnimation = function(pet) {
    const overlay = document.getElementById('hatchOverlay');
    const egg = document.getElementById('hatchEgg');
    const icon = document.getElementById('hatchedPetIcon');
    
    if (!overlay || !egg || !icon) return;
    
    overlay.style.display = 'flex';
    egg.style.display = 'block';
    icon.style.display = 'none';
    egg.className = 'shaking';

    setTimeout(() => {
      egg.className = 'breaking';
      setTimeout(() => {
        egg.style.display = 'none';
        icon.style.display = 'block';
        icon.innerText = pet.icon;
        const nameEl = document.getElementById('hatchedPetName');
        const infoEl = document.getElementById('hatchedPetInfo');
        if (nameEl) nameEl.innerText = pet.name;
        if (infoEl) infoEl.innerText = `${pet.rarity.toUpperCase()} | +$${(pet.earnings * window.state.mult).toLocaleString()}/s`;
      }, 600);
    }, 1500);
  };

  window.closeHatch = function() {
    const overlay = document.getElementById('hatchOverlay');
    const egg = document.getElementById('hatchEgg');
    const icon = document.getElementById('hatchedPetIcon');
    if (overlay) overlay.style.display = 'none';
    if (egg) {
      egg.className = '';
      egg.style.display = 'block';
    }
    if (icon) icon.style.display = 'none';
  };

  window.sellPet = function(id) {
    let idx = window.state.pets.findIndex(p => p.id === id);
    if (idx === -1) return;
    window.state.money += window.state.pets[idx].earnings * 15;
    window.state.pets.splice(idx, 1);
    saveGame();
    updateUI();
  };

  // resto de funciones igual...
  window.doRebirth = function() {
    if (window.state.rb >= 5 || window.state.money < window.rebirthCosts[window.state.rb]) return;
    window.state.rb++;
    window.state.mult *= 4;
    window.state.money = 10;
    window.state.pets = [];
    window.state.priceN = 10;
    window.state.priceS = 500;
    saveGame();
    updateUI();
    alert("¬°REBIRTH COMPLETADO! Ganancias x4.");
  };

  function updateRebirthButton() {
    const btn = document.getElementById('rebirthBtn');
    if (!btn) return;
    if (window.state.rb >= 5) {
      btn.innerText = "‚≠ê M√ÅXIMO NIVEL ALCANZADO";
      btn.disabled = true;
    } else {
      let cost = window.rebirthCosts[window.state.rb];
      btn.innerText = `‚ö° REBIRTH ${window.state.rb+1} ($${cost.toLocaleString()})`;
      btn.disabled = window.state.money < cost;
    }
  }

  function renderPets() {
    const list = document.getElementById('petList');
    if (!list) return;
    list.innerHTML = '';
    window.state.pets.forEach(p => {
      const div = document.createElement('div');
      div.className = `pet ${p.rarity}`;
      div.innerHTML = `
        <span>${p.icon} ${p.name}</span>
        <span>$${(p.earnings * window.state.mult).toLocaleString()}/s 
          <button class="sellBtn" onclick="sellPet(${p.id})">Vender</button>
        </span>
      `;
      list.appendChild(div);
    });
  }

  function startIncomeLoop() {
    setInterval(() => {
      let income = window.state.pets.reduce((total, pet) => total + pet.earnings, 0) * window.state.mult;
      if (income > 0) {
        window.state.money += income;
        updateUI();
      }
    }, 1000);
  }

})();
</script>
