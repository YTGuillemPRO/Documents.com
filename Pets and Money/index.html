<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pet Simulator Ultra - Save System Edition</title>
    <style>
        /* CONFIGURACI√ìN VISUAL EXTENSA */
        :root {
            --primary: #4f46e5;
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #0f172a;
            --glass: rgba(255, 255, 255, 0.95);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', system-ui, sans-serif; }

        body {
            height: 100vh;
            overflow: hidden;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #game-container {
            width: 420px;
            height: 720px;
            background: var(--glass);
            border-radius: 30px;
            padding: 25px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            position: relative;
            border: 4px solid rgba(255, 255, 255, 0.1);
        }

        h1 {
            font-size: 24px;
            text-align: center;
            color: var(--dark);
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        /* HUD DE ESTAD√çSTICAS */
        .stats-panel {
            background: #f1f5f9;
            padding: 20px;
            border-radius: 20px;
            margin-bottom: 15px;
            border: 1px solid #e2e8f0;
        }

        .money-display {
            font-size: 32px;
            font-weight: 900;
            color: var(--success);
            text-align: center;
            text-shadow: 0 2px 4px rgba(34, 197, 94, 0.1);
        }

        .rebirth-status {
            font-size: 12px;
            color: var(--primary);
            font-weight: bold;
            text-align: center;
            margin-top: 5px;
        }

        /* NAVEGACI√ìN */
        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .tab-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 12px;
            background: #e2e8f0;
            cursor: pointer;
            font-weight: 700;
            font-size: 13px;
            transition: 0.3s;
        }

        .tab-btn.active {
            background: var(--primary);
            color: white;
        }

        /* √ÅREA DE COMPRA */
        .shop-area {
            background: #fff;
            padding: 15px;
            border-radius: 20px;
            margin-bottom: 15px;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
        }

        .egg-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 12px;
        }

        .egg-btn {
            flex: 1;
            padding: 12px;
            border-radius: 12px;
            border: 2px solid #e2e8f0;
            background: #fff;
            cursor: pointer;
            font-weight: bold;
            font-size: 12px;
        }

        .egg-btn.active {
            border-color: var(--warning);
            background: #fffbeb;
        }

        .main-action-btn {
            width: 100%;
            padding: 18px;
            border-radius: 15px;
            border: none;
            background: linear-gradient(45deg, #f59e0b, #ef4444);
            color: white;
            font-weight: 900;
            font-size: 16px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
            margin-bottom: 8px;
        }

        .main-action-btn:active { transform: scale(0.96); }

        .rebirth-btn {
            width: 100%;
            padding: 12px;
            border-radius: 12px;
            border: none;
            background: #6366f1;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }

        .rebirth-btn:disabled {
            background: #cbd5e1;
            cursor: not-allowed;
        }

        /* LISTA DE PETS */
        .scroll-container {
            flex: 1;
            overflow-y: auto;
            padding-right: 5px;
        }

        .pet-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: #fff;
            border-radius: 15px;
            margin-bottom: 8px;
            border: 1px solid #e2e8f0;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .pet-info b { font-size: 14px; display: block; }
        .pet-info span { font-size: 11px; color: #64748b; font-weight: bold; }

        .rarity-common { border-left: 5px solid #94a3b8; }
        .rarity-uncommon { border-left: 5px solid #22c55e; }
        .rarity-rare { border-left: 5px solid #3b82f6; }
        .rarity-god { border-left: 5px solid #a855f7; }
        .rarity-og { border-left: 5px solid #ef4444; background: #fff1f2; }

        .sell-btn {
            background: #fee2e2;
            color: #ef4444;
            border: none;
            padding: 6px 10px;
            border-radius: 8px;
            font-weight: 800;
            font-size: 10px;
            cursor: pointer;
        }

        /* ANIMACI√ìN DE APERTURA */
        #hatch-overlay {
            position: absolute;
            inset: 0;
            background: rgba(15, 23, 42, 0.95);
            border-radius: 30px;
            z-index: 1000;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
        }

        .egg-animation {
            width: 120px;
            height: 160px;
            background: radial-gradient(circle at 30% 30%, #fff, #fbbf24);
            border-radius: 50% 50% 45% 45%;
            border: 6px solid #d97706;
            margin-bottom: 20px;
        }

        .shake { animation: shake 0.5s infinite; }
        @keyframes shake {
            0%, 100% { transform: rotate(0); }
            25% { transform: rotate(-10deg); }
            75% { transform: rotate(10deg); }
        }

        .revealed-pet { font-size: 80px; margin-bottom: 10px; display: none; }
    </style>
</head>
<body>

    <div id="game-container">
        <h1>Pet Simulator Save</h1>
        
        <div class="stats-panel">
            <div class="money-display">üí∞ $<span id="balance">10</span></div>
            <div class="rebirth-status">REBIRTH: <span id="rb-level">0</span>/5 (Mult: x<span id="rb-mult">1</span>)</div>
        </div>

        <div class="nav-tabs">
            <button class="tab-btn active" onclick="switchTab('play')">JUEGO</button>
            <button class="tab-btn" onclick="switchTab('index')">INDEX</button>
        </div>

        <div id="play-tab" class="tab-content active">
            <div class="shop-area">
                <div class="egg-selector">
                    <button id="btn-normal" class="egg-btn active" onclick="setEggType(false)">Normal ($<span id="price-n">10</span>)</button>
                    <button id="btn-special" class="egg-btn" onclick="setEggType(true)">Especial ($<span id="price-s">500</span>)</button>
                </div>
                <button class="main-action-btn" onclick="tryOpenEgg()">ABRIR HUEVO</button>
                <button id="rebirth-action" class="rebirth-btn" onclick="attemptRebirth()" disabled>HACER REBIRTH</button>
            </div>

            <div class="scroll-container" id="pet-list-ui">
                </div>
        </div>

        <div id="index-tab" class="tab-content" style="display:none">
            <div class="scroll-container" id="index-list-ui"></div>
        </div>

        <div id="hatch-overlay">
            <div class="egg-animation" id="egg-gfx"></div>
            <div class="revealed-pet" id="pet-gfx">üê±</div>
            <h2 id="pet-name-reveal"></h2>
            <p id="pet-rarity-reveal"></p>
            <button class="tab-btn" style="margin-top:20px; width:150px" onclick="closeHatch()">CONTINUAR</button>
        </div>
    </div><script>
    // --- CONFIGURACI√ìN DE DATOS ---
    const petsData = {
        normal: [
            { icon: 'üê≠', name: 'Rat√≥n', rarity: 'common', earnings: 5 },
            { icon: 'üê∂', name: 'Perro', rarity: 'common', earnings: 8 },
            { icon: 'üê±', name: 'Gato', rarity: 'uncommon', earnings: 20 },
            { icon: 'ü¶ä', name: 'Zorro', rarity: 'rare', earnings: 55 }
        ],
        special: [
            { icon: 'ü¶Å', name: 'Le√≥n Real', rarity: 'rare', earnings: 150 },
            { icon: 'ü¶Ñ', name: 'Unicornio', rarity: 'god', earnings: 500 },
            { icon: 'üê≤', name: 'Drag√≥n', rarity: 'god', earnings: 1200 },
            { icon: 'ü¶ñ', name: 'T-Rex OG', rarity: 'og', earnings: 5000 }
        ]
    };

    const rebirthCosts = [1000000, 10000000, 100000000, 500000000, 2000000000];

    // --- ESTADO DEL JUEGO ---
    let state = {
        money: 10,
        rebirths: 0,
        multiplier: 1,
        ownedPets: [],
        discovered: [],
        prices: { normal: 10, special: 500 }
    };

    let isSpecialEgg = false;

    // --- SISTEMA DE GUARDADO (LOCALSTORAGE) ---
    function saveGame() {
        localStorage.setItem('PetSim_SaveData', JSON.stringify(state));
    }

    function loadGame() {
        const saved = localStorage.getItem('PetSim_SaveData');
        if (saved) {
            const parsed = JSON.parse(saved);
            state = { ...state, ...parsed };
        }
        updateUI();
    }

    // --- L√ìGICA DE INTERFAZ ---
    function updateUI() {
        document.getElementById('balance').innerText = Math.floor(state.money).toLocaleString();
        document.getElementById('rb-level').innerText = state.rebirths;
        document.getElementById('rb-mult').innerText = state.multiplier;
        document.getElementById('price-n').innerText = state.prices.normal.toLocaleString();
        document.getElementById('price-s').innerText = state.prices.special.toLocaleString();

        const rbBtn = document.getElementById('rebirth-action');
        if (state.rebirths >= 5) {
            rbBtn.innerText = "NIVEL M√ÅXIMO";
            rbBtn.disabled = true;
        } else {
            const cost = rebirthCosts[state.rebirths];
            rbBtn.innerText = `REBIRTH ($${cost.toLocaleString()})`;
            rbBtn.disabled = state.money < cost;
        }
        renderPetList();
    }

    function switchTab(tab) {
        document.getElementById('play-tab').style.display = tab === 'play' ? 'block' : 'none';
        document.getElementById('index-tab').style.display = tab === 'index' ? 'block' : 'none';
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        event.target.classList.add('active');
        if(tab === 'index') renderIndex();
    }

    function setEggType(val) {
        isSpecialEgg = val;
        document.getElementById('btn-normal').classList.toggle('active', !val);
        document.getElementById('btn-special').classList.toggle('active', val);
    }

    // --- MEC√ÅNICAS DE JUEGO ---
    function tryOpenEgg() {
        const cost = isSpecialEgg ? state.prices.special : state.prices.normal;
        if (state.money < cost) return alert("No tienes suficiente dinero");

        state.money -= cost;
        if (isSpecialEgg) state.prices.special = Math.floor(state.prices.special * 1.3);
        else state.prices.normal = Math.floor(state.prices.normal * 1.25);

        const pool = isSpecialEgg ? petsData.special : petsData.normal;
        const pet = pool[Math.floor(Math.random() * pool.length)];
        
        state.ownedPets.push({ ...pet, id: Date.now() });
        if (!state.discovered.includes(pet.name)) state.discovered.push(pet.name);

        showHatch(pet);
        saveGame();
        updateUI();
    }

    function showHatch(pet) {
        const overlay = document.getElementById('hatch-overlay');
        const egg = document.getElementById('egg-gfx');
        const petGfx = document.getElementById('pet-gfx');
        
        overlay.style.display = 'flex';
        egg.style.display = 'block';
        egg.classList.add('shake');
        petGfx.style.display = 'none';

        setTimeout(() => {
            egg.classList.remove('shake');
            egg.style.display = 'none';
            petGfx.style.display = 'block';
            petGfx.innerText = pet.icon;
            document.getElementById('pet-name-reveal').innerText = pet.name;
            document.getElementById('pet-rarity-reveal').innerText = pet.rarity.toUpperCase();
        }, 1200);
    }

    function closeHatch() {
        document.getElementById('hatch-overlay').style.display = 'none';
    }

    function sellPet(id) {
        const idx = state.ownedPets.findIndex(p => p.id === id);
        if (idx > -1) {
            state.money += state.ownedPets[idx].earnings * 5;
            state.ownedPets.splice(idx, 1);
            saveGame();
            updateUI();
        }
    }

    function attemptRebirth() {
        const cost = rebirthCosts[state.rebirths];
        if (state.money >= cost && state.rebirths < 5) {
            state.rebirths++;
            state.multiplier *= 3;
            state.money = 10; // <--- REQUISITO: INICIO CON $10
            state.ownedPets = [];
            state.prices = { normal: 10, special: 500 };
            saveGame();
            updateUI();
            alert("¬°Rebirth exitoso! Tus ganancias se han triplicado.");
        }
    }

    function renderPetList() {
        const cont = document.getElementById('pet-list-ui');
        cont.innerHTML = '';
        state.ownedPets.forEach(p => {
            const div = document.createElement('div');
            div.className = `pet-item rarity-${p.rarity}`;
            div.innerHTML = `
                <div class="pet-info">
                    <b>${p.icon} ${p.name}</b>
                    <span>+$${(p.earnings * state.multiplier).toFixed(1)}/s</span>
                </div>
                <button class="sell-btn" onclick="sellPet(${p.id})">VENDER</button>
            `;
            cont.appendChild(div);
        });
    }

    function renderIndex() {
        const cont = document.getElementById('index-list-ui');
        cont.innerHTML = '';
        [...petsData.normal, ...petsData.special].forEach(p => {
            const isFound = state.discovered.includes(p.name);
            const div = document.createElement('div');
            div.className = 'pet-item';
            div.style.opacity = isFound ? '1' : '0.4';
            div.innerHTML = `
                <div class="pet-info">
                    <b>${isFound ? p.icon : '‚ùì'} ${p.name}</b>
                    <span>${p.rarity.toUpperCase()}</span>
                </div>
            `;
            cont.appendChild(div);
        });
    }

    // --- BUCLE DE DINERO ---
    setInterval(() => {
        let income = 0;
        state.ownedPets.forEach(p => income += p.earnings);
        if (income > 0) {
            state.money += (income * state.multiplier);
            updateUI();
        }
    }, 1000);

    // Inicio
    window.onload = loadGame;
</script>
</body>
</html>
