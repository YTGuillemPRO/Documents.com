<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Juegos - Home</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f6f8fa; }
    #auth-container { background: #24292e; color: white; padding: 15px; text-align: center; }
    .login-box { display: inline-flex; gap: 10px; align-items: center; justify-content: center; flex-wrap: wrap; }
    .login-box input { padding: 8px; border-radius: 4px; border: none; }
    #btn-login-email { background:#4caf50;color:white;padding:8px 15px;border-radius:5px;border:none;cursor:pointer;font-weight:bold; }
    #btn-login-google { background: white; color: #444; padding: 8px 15px; border-radius: 5px; border: none; cursor: pointer; font-weight: bold; display: flex; align-items: center; gap: 8px; }
    #btn-login-google img { width: 18px; height: 18px; }
    #btn-logout { background:#f44336;color:white;margin-left:10px;border:none;padding:5px 10px;border-radius:3px;cursor:pointer; }
    .hidden { display:none; }
    section { padding:20px;border-bottom:1px solid #eee;background:white; }
    a { text-decoration:none;color:#0366d6;font-size:1.2rem; }
  </style>
</head>
<body>

<a href="https://discord.gg/YGVcHmu4" target="_blank">Discord para actualizaciones</a>

<div id="auth-container">
  <div id="user-logged-out" class="login-box">
    <input type="email" id="email" placeholder="Correo">
    <input type="password" id="password" placeholder="Contrase帽a">
    <button id="btn-login-email">Entrar / Registrar</button>
    <button id="btn-login-google">
      <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg">
      Google
    </button>
  </div>

  <div id="user-logged-in" class="hidden">
    <span id="welcome-msg"></span>
    <button id="btn-logout">Cerrar Sesi贸n</button>
  </div>
</div>

<!-- TODOS TUS JUEGOS -->
<section><a href="Pets and Money/index.html">Pets and Money</a></section>
<section><a href="juego2/index.html">No cliques el Bot贸n</a></section>
<section><a href="Roba un Brainrot/index.html">Steal a Brainrot</a></section>
<section><a href="juego4/index.html">FiFa</a></section>
<section><a href="juego5/index.html">TikTok</a></section>
<section><a href="juego7/index.html">La serpiente</a></section>
<section><a href="juego8/index.html">Rocket League</a></section>
<section><a href="juego9/index.html">Speed per click</a></section>
<section><a href="Minecraft/index.html">Minecraft</a></section>
<section><a href="juego11/index.html">Obby Practica</a></section>
<section><a href="juego12/index.html">Geometry Dash</a></section>
<section><a href="juego13/index.html">1 V 1 Arco</a></section>
<section><a href="juego14/index.html">Fornite</a></section>
<section><a href="call-of-duty/index.html">Call of Duty</a></section>
<section><a href="Chatgpt/index.html">Chatgpt</a></section>
<section><a href="tap-on-goal/index.html">Tap On Goal</a></section>
<section><a href="Cr贸nicas-del-Multiverso/src/index.html">锔 Cr贸nicas del Multiverso (Beta)</a></section>
<section><a href="AETHER STRANDED/index.html">AETHER STRANDED</a></section>
<section><a href="instagram/index.html">Instagram</a></section>
<section><a href="fl studio/index.html">Studio</a></section>
<section><a href="Roblox/index.html">Roblox</a></section>
<section><a href="One More Game/index.html">Un Juego M谩s</a></section>
<section><a href="Clash Royale/index.html">Clash Royale</a></section>
<section><a href="Mario Kart/index.html">Mario Kart</a></section>
<section><a href="Terranova/index.html">TerraNova</a></section>
<section><a href="The Forge/index.html">La Forga</a></section>
<section><a href="Futbol/index.html">Futbol</a></section>
<section><a href="FNAF/index.html">Five Nigths at Freddy</a></section>
<section><a href="Discord/index.html">Discord</a></section>
<section><a href="Golf Orbit/index.html">Golf Orbit</a></section>
<section><a href="Pixel Blade/index.html">Espada Pixel</a></section>
<section><a href="Flip a Coin/index.html">Flip a Coin</a></section>
<section><a href="1001 Juegos/index.html">1001 Juegos</a></section>
<section><a href="Brawl Stars/index.html">Brawl Stars</a></section>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import {
  getAuth,
  onAuthStateChanged,
  signInWithEmailAndPassword,
  createUserWithEmailAndPassword,
  signOut,
  GoogleAuthProvider,
  signInWithPopup
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyDpmb0duQ3ZgjbipPWsMvpLx3d-vojQAxM",
  authDomain: "inici-de-sessio.firebaseapp.com",
  projectId: "inici-de-sessio",
  appId: "1:106046428749:web:c555c61ff94f5f5691ee04"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

//  LISTA DE BANEADOS
const BANNED_EMAILS = [
  "gvarela@ietemple.cat",
  "bcarrere@ietemple.cat"
];

const loggedOut = document.getElementById("user-logged-out");
const loggedIn = document.getElementById("user-logged-in");
const welcomeMsg = document.getElementById("welcome-msg");

document.getElementById("btn-login-email").onclick = async () => {
  const email = document.getElementById("email").value;
  const pass = document.getElementById("password").value;

  try {
    await signInWithEmailAndPassword(auth, email, pass);
  } catch {
    await createUserWithEmailAndPassword(auth, email, pass);
  }
};

document.getElementById("btn-login-google").onclick = async () => {
  await signInWithPopup(auth, provider);
};

document.getElementById("btn-logout").onclick = () => signOut(auth);

//  CONTROL DE SESIN + BAN
onAuthStateChanged(auth, async (user) => {
  if (user) {

    if (BANNED_EMAILS.includes(user.email)) {
      alert("Tu cuenta ha sido suspendida.");
      await signOut(auth);
      return;
    }

    loggedOut.classList.add("hidden");
    loggedIn.classList.remove("hidden");
    welcomeMsg.textContent = "Conectado como: " + user.email;

  } else {
    loggedIn.classList.add("hidden");
    loggedOut.classList.remove("hidden");
  }
});
</script>

</body>
</html>
