<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Neon Dash 2.8</title>

<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:#000;
  font-family:Arial, Helvetica, sans-serif;
}

canvas{
  display:block;
  background:#000;
}

/* UI */
#ui{
  position:fixed;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:10;
}

.screen{
  display:none;
  flex-direction:column;
  align-items:center;
  gap:20px;
  color:#0ff;
  font-size:32px;
  text-shadow:0 0 15px #0ff;
}

.screen.active{display:flex;}

button{
  padding:14px 32px;
  font-size:20px;
  border:none;
  border-radius:10px;
  background:#f06;
  color:white;
  cursor:pointer;
  box-shadow:0 0 20px #f06;
}

button:hover{transform:scale(1.05)}

#progress{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:14px;
  background:#111;
  z-index:15;
}

#bar{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#60f,#0ff,#f06);
}
</style>
</head>

<body>

<div id="progress"><div id="bar"></div></div>

<div id="ui">
  <div id="start" class="screen active">
    <div>âœ¨ NEON DASH 2.8 âœ¨</div>
    <button onclick="show('levels')">JUGAR</button>
  </div>

  <div id="levels" class="screen">
    <div>Selecciona Nivel</div>
    <div>
      <button onclick="startLevel(1)">1</button>
      <button onclick="startLevel(2)">2</button>
      <button onclick="startLevel(3)">3</button>
      <button onclick="startLevel(4)">4</button>
      <button onclick="startLevel(5)">5</button>
      <button onclick="startLevel(6)">6</button>
      <button onclick="startLevel(7)">7</button>
      <button onclick="startLevel(8)">8</button>
      <button onclick="startLevel(9)">9</button>
      <button onclick="startLevel(10)">10</button>
    </div>
  </div>

  <div id="over" class="screen">
    <div id="overText"></div>
    <button onclick="show('levels')">Volver</button>
  </div>
</div>

<canvas id="game"></canvas>

<script>
/* ===== CANVAS FULLSCREEN ===== */
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

function resize(){
  canvas.width=innerWidth;
  canvas.height=innerHeight;
}
addEventListener("resize",resize);
resize();

/* ===== UI ===== */
const screens={
  start:document.getElementById("start"),
  levels:document.getElementById("levels"),
  over:document.getElementById("over")
};

function show(name){
  Object.values(screens).forEach(s=>s.classList.remove("active"));
  if(name) screens[name].classList.add("active");
}

/* ===== GAME DATA ===== */
let state="menu";
let level=1;
let distance=0;
const levelLength=16000;

let player;
let spikes=[];

const levels={
  1:{speed:5,color:"#0ff"},
  2:{speed:5.5,color:"#0f0"},
  3:{speed:6,color:"#ff0"},
  4:{speed:6.5,color:"#f06"},
  5:{speed:7,color:"#60f"},
  6:{speed:7.5,color:"#0ff"},
  7:{speed:8,color:"#f00"},
  8:{speed:8.5,color:"#0f0"},
  9:{speed:9,color:"#ff0"},
 10:{speed:9.5,color:"#fff"}
};

/* ===== START LEVEL ===== */
function startLevel(lvl){
  level=lvl;
  distance=0;
  document.getElementById("bar").style.width="0%";
  show(null);

  player={
    x:canvas.width*0.25,
    y:canvas.height*0.7,
    size:30,
    dy:0,
    grounded:false,
    rot:0
  };

  spikes=[];
  let x=canvas.width;
  for(let i=0;i<120;i++){
    x+=200+Math.random()*120;
    spikes.push({x,y:canvas.height*0.75,h:40});
  }

  state="play";
  requestAnimationFrame(loop);
}

/* ===== LOOP ===== */
const GRAVITY=0.8;
const JUMP=-15;

function loop(){
  if(state!=="play") return;

  ctx.clearRect(0,0,canvas.width,canvas.height);

  /* suelo */
  const floor=canvas.height*0.75;
  ctx.fillStyle="#111";
  ctx.fillRect(0,floor,canvas.width,canvas.height-floor);

  /* player */
  player.dy+=GRAVITY;
  player.y+=player.dy;
  player.rot+=0.1;

  if(player.y+player.size>=floor){
    player.y=floor-player.size;
    player.dy=0;
    player.grounded=true;
  } else player.grounded=false;

  /* move */
  const speed=levels[level].speed;
  spikes.forEach(s=>s.x-=speed);
  distance+=speed;

  /* draw spikes */
  ctx.fillStyle=levels[level].color;
  ctx.shadowColor=levels[level].color;
  ctx.shadowBlur=10;
  spikes.forEach(s=>{
    ctx.beginPath();
    ctx.moveTo(s.x,s.y);
    ctx.lineTo(s.x+25,s.y+s.h);
    ctx.lineTo(s.x+50,s.y);
    ctx.fill();
  });
  ctx.shadowBlur=0;

  /* draw player */
  ctx.save();
  ctx.translate(player.x+15,player.y+15);
  ctx.rotate(player.rot);
  ctx.fillStyle=levels[level].color;
  ctx.fillRect(-15,-15,30,30);
  ctx.restore();

  /* collisions */
  for(let s of spikes){
    if(player.x<s.x+50 &&
       player.x+player.size>s.x &&
       player.y<s.y+s.h &&
       player.y+player.size>s.y){
      end(false);
      return;
    }
  }

  /* progress */
  document.getElementById("bar").style.width=
    Math.min(distance/levelLength*100,100)+"%";

  if(distance>=levelLength){
    end(true);
    return;
  }

  requestAnimationFrame(loop);
}

/* ===== INPUT ===== */
addEventListener("keydown",e=>{
  if(e.code==="Space"&&state==="play") jump();
});
canvas.addEventListener("click",jump);

function jump(){
  if(player.grounded){
    player.dy=JUMP;
  }
}

/* ===== END ===== */
function end(win){
  state="menu";
  document.getElementById("overText").innerText=
    win?`ðŸŽ‰ Nivel ${level} completado`:`ðŸ’¥ Game Over (Nivel ${level})`;
  show("over");
}
</script>
</body>
</html>
